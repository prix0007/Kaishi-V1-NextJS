_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"5rCv":function(e,t,a){"use strict";var r=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a("q1tI")),o=(0,r(a("8/g6")).default)(c.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.default=o},Mybo:function(e,t,a){"use strict";a.r(t);var r=a("o0o1"),n=a.n(r),c=a("HaE+"),o=a("nKUr"),i=a("1OyB"),s=a("vuIU"),l=a("Ji7U"),d=a("md7G"),p=a("foSv"),u=a("q1tI"),b=a("Ff2n"),j=a("wx14"),h=(a("17x9"),a("iuhU")),m=a("H2TA"),f=a("NqtD"),v=a("ye/S");var g=u.createContext();var O=u.createContext(),x=u.forwardRef((function(e,t){var a,r,n=e.align,c=void 0===n?"inherit":n,o=e.classes,i=e.className,s=e.component,l=e.padding,d=e.scope,p=e.size,m=e.sortDirection,v=e.variant,x=Object(b.a)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),y=u.useContext(g),w=u.useContext(O),C=w&&"head"===w.variant;s?(r=s,a=C?"columnheader":"cell"):r=C?"th":"td";var k=d;!k&&C&&(k="col");var R=l||(y&&y.padding?y.padding:"default"),N=p||(y&&y.size?y.size:"medium"),q=v||w&&w.variant,z=null;return m&&(z="asc"===m?"ascending":"descending"),u.createElement(r,Object(j.a)({ref:t,className:Object(h.a)(o.root,o[q],i,"inherit"!==c&&o["align".concat(Object(f.a)(c))],"default"!==R&&o["padding".concat(Object(f.a)(R))],"medium"!==N&&o["size".concat(Object(f.a)(N))],"head"===q&&y&&y.stickyHeader&&o.stickyHeader),"aria-sort":z,role:a,scope:k},x))})),y=Object(m.a)((function(e){return{root:Object(j.a)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?Object(v.d)(Object(v.b)(e.palette.divider,1),.88):Object(v.a)(Object(v.b)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(x),w=a("tRbT"),C=a("ofer"),k=a("Z3vd"),R=u.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.component,c=void 0===n?"div":n,o=Object(b.a)(e,["classes","className","component"]);return u.createElement(c,Object(j.a)({ref:t,className:Object(h.a)(a.root,r)},o))})),N=Object(m.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(R),q=a("kKAo"),z="table",_=u.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.component,c=void 0===n?z:n,o=e.padding,i=void 0===o?"default":o,s=e.size,l=void 0===s?"medium":s,d=e.stickyHeader,p=void 0!==d&&d,m=Object(b.a)(e,["classes","className","component","padding","size","stickyHeader"]),f=u.useMemo((function(){return{padding:i,size:l,stickyHeader:p}}),[i,l,p]);return u.createElement(g.Provider,{value:f},u.createElement(c,Object(j.a)({role:c===z?null:"table",ref:t,className:Object(h.a)(a.root,r,p&&a.stickyHeader)},m)))})),A=Object(m.a)((function(e){return{root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Object(j.a)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},stickyHeader:{borderCollapse:"separate"}}}),{name:"MuiTable"})(_),E={variant:"head"},H="thead",T=u.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.component,c=void 0===n?H:n,o=Object(b.a)(e,["classes","className","component"]);return u.createElement(O.Provider,{value:E},u.createElement(c,Object(j.a)({className:Object(h.a)(a.root,r),ref:t,role:c===H?null:"rowgroup"},o)))})),M=Object(m.a)({root:{display:"table-header-group"}},{name:"MuiTableHead"})(T),I=u.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.component,c=void 0===n?"tr":n,o=e.hover,i=void 0!==o&&o,s=e.selected,l=void 0!==s&&s,d=Object(b.a)(e,["classes","className","component","hover","selected"]),p=u.useContext(O);return u.createElement(c,Object(j.a)({ref:t,className:Object(h.a)(a.root,r,p&&{head:a.head,footer:a.footer}[p.variant],i&&a.hover,l&&a.selected),role:"tr"===c?null:"row"},d))})),S=Object(m.a)((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,"&$hover:hover":{backgroundColor:e.palette.action.hover},"&$selected, &$selected:hover":{backgroundColor:Object(v.b)(e.palette.secondary.main,e.palette.action.selectedOpacity)}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(I),P={variant:"body"},D="tbody",L=u.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.component,c=void 0===n?D:n,o=Object(b.a)(e,["classes","className","component"]);return u.createElement(O.Provider,{value:P},u.createElement(c,Object(j.a)({className:Object(h.a)(a.root,r),ref:t,role:c===D?null:"rowgroup"},o)))})),W=Object(m.a)({root:{display:"table-row-group"}},{name:"MuiTableBody"})(L),X=a("5Yp1"),B=a("jrXz"),U=a.n(B),F=a("VC3L"),J=a("oZBQ"),$=a("8cHP"),K=a("5rCv"),Z=a.n(K),G=Object(m.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},body:{fontSize:14}}}))(y),Q=Object(m.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.common.white}},selected:{background:e.palette.success.light}}}))(S),V=function(e){var t=e.index,a=e.description,r=e.value,i=e.recipient,s=e.approvalCount,l=e.approversCount,d=e.address,p=e.complete,u=function(){var e=Object(c.a)(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(F.a)(d),e.next=3,J.a.eth.getAccounts();case 3:return r=e.sent,e.next=6,a.methods.approveRequests(t).send({from:r[0]});case 6:$.Router.pushRoute("/campaigns/".concat(d,"/requests"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(F.a)(d),e.next=3,J.a.eth.getAccounts();case 3:return r=e.sent,e.next=6,a.methods.finalizeRequest(t).send({from:r[0]});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)(Q,{children:[Object(o.jsx)(G,{component:"th",scope:"row",children:t}),Object(o.jsx)(G,{align:"center",children:a}),Object(o.jsx)(G,{align:"center",children:r}),Object(o.jsx)(G,{align:"center",children:i}),Object(o.jsxs)(G,{align:"center",children:[s,"/",l]}),Object(o.jsx)(G,{align:"center",children:p?Object(o.jsx)(Z.a,{}):Object(o.jsx)(k.a,{variant:"outlined",onClick:u,children:"Approve"})}),Object(o.jsx)(G,{align:"center",children:p?Object(o.jsx)(Z.a,{}):Object(o.jsx)(k.a,{variant:"outlined",color:"primary",onClick:b,children:"Finalize"})})]},t)};function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(p.a)(e);if(t){var n=Object(p.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(d.a)(this,a)}}var ee=Object(m.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},body:{fontSize:14}}}))(y),te=function(e){Object(l.a)(a,e);var t=Y(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.address,a=e.requests,r=e.approversCount,n=e.requestCount;return Object(o.jsx)(X.a,{children:Object(o.jsxs)(w.a,{container:!0,children:[Object(o.jsx)(w.a,{item:!0,xs:12,sm:1}),Object(o.jsxs)(w.a,{item:!0,xs:12,sm:10,children:[Object(o.jsxs)(w.a,{container:!0,justify:"space-between",children:[Object(o.jsx)(C.a,{variant:"h4",children:"Requests"}),Object(o.jsx)($.Link,{route:"/campaigns/".concat(t,"/requests/new"),children:Object(o.jsx)(k.a,{variant:"contained",color:"primary",children:"Add Request"})})]}),Object(o.jsxs)(w.a,{container:!0,className:U.a.tableWrapper,children:[Object(o.jsx)(N,{component:q.a,children:Object(o.jsxs)(A,{"aria-label":"customized table",children:[Object(o.jsx)(M,{children:Object(o.jsxs)(S,{children:[Object(o.jsx)(ee,{children:"S.No."}),Object(o.jsx)(ee,{align:"center",children:"Description"}),Object(o.jsx)(ee,{align:"center",children:"Amount"}),Object(o.jsx)(ee,{align:"center",children:"Recipient"}),Object(o.jsx)(ee,{align:"center",children:"Approval Count"}),Object(o.jsx)(ee,{align:"center",children:"Approve"}),Object(o.jsx)(ee,{align:"center",children:"Finalize"})]})}),Object(o.jsx)(W,{children:a.map((function(e,a){return Object(o.jsx)(V,{index:a,description:e.description,value:J.a.utils.fromWei(e.value,"ether"),recipient:e.recipient,address:t,complete:e.completed,approvalCount:e.approvalsCount,approversCount:r},a+e.recipient)}))})]})}),Object(o.jsxs)(C.a,{variant:"body2",className:U.a.bottomInfo,children:["Found ",n," Requests"]}),Object(o.jsx)(C.a,{gutterBottom:!0,children:"In this page Users conrtributors can approve a request to withdraw balance from smart contract to the designated address as specified by campaign manager."}),Object(o.jsx)(C.a,{variant:"caption",children:"Requires a majority of approvals to be finalized by manager to transact the money."}),Object(o.jsx)(C.a,{variant:"caption",children:"If a request has been already approved it will be shown as approved and finalized"}),Object(o.jsx)(C.a,{variant:"caption",children:"If a user is not a conrtributor in current campaign he can't approve the requests."})]})]}),Object(o.jsx)(w.a,{item:!0,xs:12,sm:1})]})})}}],[{key:"getInitialProps",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,o,i,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,r=Object(F.a)(a),e.next=4,r.methods.getRequestsCount().call();case 4:return c=e.sent,e.next=7,r.methods.approversCount().call();case 7:o=e.sent,console.log(c),i=[],s=0;case 11:if(!(s<c)){e.next=19;break}return e.next=14,r.methods.requests(s).call();case 14:l=e.sent,i.push(l);case 16:++s,e.next=11;break;case 19:return e.abrupt("return",{address:a,requests:i,approversCount:o,requestCount:c});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(u.Component);t.default=te},jrXz:function(e,t,a){e.exports={bottomInfo:"requests_bottomInfo__11gXr",tableWrapper:"requests_tableWrapper__1_rb0"}},"m/hO":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return a("Mybo")}])}},[["m/hO",0,2,1,3,4]]]);